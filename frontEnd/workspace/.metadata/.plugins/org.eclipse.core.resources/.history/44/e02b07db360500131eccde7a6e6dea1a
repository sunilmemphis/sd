-- Morning Routine

local storyboard = require ( "storyboard" )
local widget = require( "widget" )

--Create a storyboard scene for this module
local scene = storyboard.newScene()

--Create the scene
function scene:createScene( event )
	local group = self.view
	storyboard.returnTo = "homePage";
	
	-- Set up the background
	local background = display.newImage( "assets/wallpaper.jpg" )
	group:insert( background, true)
	background.isFullResolution = true
	
	local xml = require( "xml" ).newParser()
	local questionnaire = xml:loadFile( "data2.xml")
	print(questionnaire.properties["version"])
	
	-- Get total number of Questions
	local noOfQuestions = (questionnaire.properties["noOfQuestions"])
	-- idiosyncrasies  of loosely typed languages
	local intno = noOfQuestions + 0
	
	local function scrollListener( event )
		local phase = event.phase
		local direction = event.direction
		
		if "began" == phase then
			--print( "Began" )
		elseif "moved" == phase then
			--print( "Moved" )
		elseif "ended" == phase then
			--print( "Ended" )
		end
		
		-- If the scrollView has reached it's scroll limit
		if event.limitReached then
			if "up" == direction then
				print( "Reached Top Limit" )
			elseif "down" == direction then
				print( "Reached Bottom Limit" )
			elseif "left" == direction then
				print( "Reached Left Limit" )
			elseif "right" == direction then
				print( "Reached Right Limit" )
			end
		end
				
		return true
	end

	-- Create a ScrollView
	local scrollView = widget.newScrollView
	{
		left = 0,
		top = 0,
		width = display.contentWidth,
		height = display.contentHeight,
		bottomPadding = 50,
		id = "onBottom",
		horizontalScrollDisabled = true,
		verticalScrollDisabled = false,
		listener = scrollListener,
	}
	local backgroundE = display.newImage( "assets/wallpaperE.jpg" )
	backgroundE.x = bg.contentWidth * 0.5
	backgroundE.y = bg.contentHeight * 0.5
	scrollView:insert( backgroundE, true)
	
	local i = 1
	while i  <= intno do
		 print (questionnaire.child[i].child[1].value)
		 local screenText = display.newText( questionnaire.child[i].child[1].value, 0, 0, native.systemFontBold, 18 )
		 screenText:setTextColor( 0 )
		 screenText.x = 100;
		 screenText.y = 150*i;
		 scrollView:insert( screenText )
		 i = i + 1
	end
	
end





--Add the createScene listener
scene:addEventListener( "createScene", scene )

return scene
